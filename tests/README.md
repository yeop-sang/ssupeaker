# π§ μ°λ¦¬ ν”„λ΅μ νΈμ ν…μ¤νΈ μ „λµ

μ΄ λ¬Έμ„λ” μ°λ¦¬ μ¶”μ² μ‹μ¤ν…μ μ•μ •μ„±μ„ λ³΄μ¥ν•κΈ° μ„ν• ν…μ¤νΈ μ „λµκ³Ό λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## 1. ν…μ¤νΈ λ©ν‘

- **λ‹¨μ„ ν…μ¤νΈ(Unit Test):** κ°κ°μ ν•µμ‹¬ κΈ°λ¥(μ¶”μ² λ΅μ§, DB κ²€μƒ‰ λ“±)μ΄ λ…λ¦½μ μΌλ΅ μ μ‘λ™ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
- **ν†µν•© ν…μ¤νΈ(Integration Test):** μ½”λ“ λ³€κ²½ ν›„μ—λ„ κΈ°μ΅΄ κΈ°λ¥μ΄ κ³ μ¥ λ‚μ§€ μ•μ•λ”μ§€(νκ·€ ν…μ¤νΈ) μλ™μΌλ΅ κ²€μ¦ν•κ³ , μ „μ²΄ μ‹μ¤ν…μ΄ μ²μλ¶€ν„° λκΉμ§€ μ μ—°κ²°λμ–΄ λ™μ‘ν•λ”μ§€ λ³΄μ¥ν•©λ‹λ‹¤.

## 2. ν…μ¤νΈ νμΌ μ„¤λ…

| νμΌλ… | μ£Όμ” μ—­ν•  | ν…μ¤νΈ μΆ…λ¥ |
| :--- | :--- | :--- |
| `test_recommender_logic.py` | μ¶”μ²κΈ°μ ν•µμ‹¬ κ³„μ‚° λ΅μ§(`recommend_from_db`)μ΄ μ£Όμ–΄μ§„ ν…μ¤νΈμ™€ κ°€μ¥ μ μ‚¬ν• μμ•…μ„ DBμ—μ„ μ •ν™•ν μ°Ύμ•„λ‚΄λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. | **μ λ‹› ν…μ¤νΈ** |
| `test_api_flow.py` | μ‹¤μ  μ¤λ””μ¤ νμΌμ„ API μ„λ²„μ— μ—…λ΅λ“ν•μ—¬, μ „μ²΄ νμ΄ν”„λΌμΈ(νμΌ μ²λ¦¬ β†’ μ¶”μ² β†’ κ²°κ³Ό λ°ν™)μ„ κ±°μ³ μ ν¨ν• μ¶”μ² κ²°κ³Ό(JSON)κ°€ λ°ν™λλ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. DBκ°€ μ—†μ„ λ• μ„λ²„κ°€ μ¬λ°”λ¥΄κ² μ‹μ‘λμ§€ μ•λ”μ§€λ„ ν™•μΈν•©λ‹λ‹¤. | **ν†µν•© ν…μ¤νΈ** |

## 3. ν…μ¤νΈ μ‹¤ν–‰ λ°©λ²•

ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ—μ„ μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ λ¨λ“  ν…μ¤νΈλ¥Ό ν• λ²μ— μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤.

```bash
bash run_pytest.sh
```

κ° ν…μ¤νΈμ μƒμ„Έν• κ²°κ³Όλ¥Ό λ³΄λ ¤λ©΄ `-v` μµμ…μ„ μ¶”κ°€ν•μ„Έμ”.

```bash
bash run_pytest.sh -v
```

## 4. μ£Όμ” ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

- **μ λ‹› ν…μ¤νΈ:**
  - κ°€μ§ λ°μ΄ν„°(fixture)μ™€ λ¨μ κ°μ²΄(mock)λ¥Ό μ‚¬μ©ν•μ—¬, AI λ¨λΈμ΄λ‚ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬μ— μμ΅΄ν•μ§€ μ•κ³  μμ κ³„μ‚° λ΅μ§μ μ •ν™•μ„±μ„ κ²€μ¦ν•©λ‹λ‹¤. (`test_recommender_logic.py`)

- **ν†µν•© ν…μ¤νΈ:**
  - κ°€μ§ μ¤λ””μ¤ νμΌκ³Ό μ„μ‹ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μƒμ„±ν•μ—¬ μ‹¤μ μ™€ μ μ‚¬ν• ν™κ²½μ„ κµ¬μ„±ν•©λ‹λ‹¤.
  - FastAPIμ `TestClient`λ¥Ό μ‚¬μ©ν•΄ λ©”λ¨λ¦¬μƒμ—μ„ API μ„λ²„λ¥Ό μ‹¤ν–‰ν•κ³ , `/recommend/` μ—”λ“ν¬μΈνΈμ— νμΌμ„ μ—…λ΅λ“ν•μ—¬ μ „μ²΄ μ¶”μ² νλ¦„μ΄ μ •μƒμ μΌλ΅ μ™„λ£λλ”μ§€ ν™•μΈν•©λ‹λ‹¤. (`test_recommend_endpoint_success`)
  - μ„λ² λ”© λ°μ΄ν„°λ² μ΄μ¤ νμΌμ΄ μ΅΄μ¬ν•μ§€ μ•μ„ λ•, μ„λ²„κ°€ μλ„λ€λ΅ `RuntimeError`λ¥Ό λ°μƒμ‹ν‚¤λ©° μ‹μ‘λμ§€ μ•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. (`test_server_startup_fails_if_db_not_found`) 